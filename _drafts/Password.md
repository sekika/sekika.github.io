---
layout: post
title: パスワードの管理について
tag: security
---
パスワードの管理について記す。

同じパスワードを様々なインターネットサービスで使い回す利用者は多いため、[パスワードリスト攻撃](https://www.jpcert.or.jp/pr/2014/pr140004.html)によってユーザーアカウントへ不正なログインをされる被害が継続的に発生している。その防止のためには、複数のサービスで同じパスワードを使いまわさないことが重要である。また、パスワードは容易に推測できないものを設定する必要がある。しかし、複雑なパスワードを、いくつも覚えることは人間には難しいため、結局は覚えやすいパスワードを使いまわしている人が多いであろう。

どのようなセキュリティ対策をしても、それで100%安全ということはない。そして、ここに記す方法は安全性を保証するものではない。ここに書かれている方法を採用したことによってなんらかの損害を生じた人がいたとしても、著者は責任を負わないことを明記しておく。

## 紙のメモ

「パスワードは紙に書いてはいけない」と言われることがある。それは、その紙を第三者の見えるところに置いておけば、簡単にパスワードを盗まれてしまうためである。一方で、紙に書いた情報は離れた場所にいる攻撃者からネットワーク経由で盗まれる心配はないという点においては、ファイルで保存する方法と比べて優れている点もある。「紙を他人に見せない」「見られてもパスワードを容易に推測できない」といった対策をすることで、安全性を高めることができる。「見られてもパスワードを容易に推測できない」ようにするためには、紙に記載したパスワードから本物のパスワードへの変換規則を作り、それを記憶しておくことになる。たとえば、決められた3文字を末尾に追加する、といったような変換規則が考えられる。たとえば、紙には

~~~
○×銀行
ID seki 
パスワード xTL2WLGz0P
~~~

と書いてあったとして、それに「yaQ」という3文字を追加して xTL2WLGz0PyaQ というパスワードとする。この「yaQ」という文字列は他のサイトにも共通のものとしておき、本人の頭だけに存在するようにしておけば、たとえば家族がそのメモを見てもログインをすることはできないであろう。

紙の保管で大変なのは紛失対策である。パスワードが紛失しても再発行できるようにしておけば良いのであるが、実際にはたくさんあるサービスのパスワードを再発行してまわるのは大変である。大きめのノートに記して持ち歩かない（持ち歩くと紛失の危険性が高くなる）、あるいはコピーして2箇所以上に保管する、といった対策が考えられる。

## 電子的な記録

パスワードをパソコンやスマホなどに電子的に記録することで、たとえばウィルスに感染してその情報を読み取られるという危険性は生じる。その対策をする必要があるという前提で、パスワードをどのように電子的に記録するのかを考える。

基本的には、パスワードが書かれているファイルを「そのまま読める状態で」保存しておくことはリスクが高く、何らかの形でそのファイルにアクセスがしにくくする、あるいは暗号化をして、解読用のキーを入力しなければパスワードを得ることができないようにすることが望ましい。[IPAが推奨する方法](http://www.ipa.go.jp/security/txt/2013/08outline.html)の中にも「パスワード付き電子ファイル」と書かれているため、それなりに権威づけされた方法であろう。「パスワード付き電子ファイル」を暗号化するためには、パスワード付き圧縮ファイルを使う方法や、[GPG](https://ja.wikipedia.org/wiki/GNU_Privacy_Guard)のようなソフトを使う方法がある。

パスワードを管理するソフトウェアは、パソコン用のものもスマホのアプリにも、いろいろなものがある。それらの多くは、マスターパスワードを入力するとパスワードのリストを見ることができるようになる、というしくみである。問題は、それらのソフトが真に「信頼できる」ものであるかどうかであり、著者としては自分が使うのであればともかく他人に勧めることはできないので、ここには特定のソフトのことは書かない。

## 2要素認証

いずれの方法でパスワードを管理したとしても、さらに安全性を高めるためには、2要素認証が設定できる場合にはすることが有効である。特に、パスワードが盗まれた時に「困る」度合いが大きいサービスでは、可能であれば設定するのが良いであろう。

これは、「ユーザー名とパスワード」という従来のログイン手段に加えて「そのときに持っているもの（携帯電話など）」によって認証をする、というものである。

たとえば、携帯電話の番号を登録しておいて、パスワードを入力すると、携帯電話にメッセージで確認コードが送られてきて、その番号を入力してはじめてログインできる。その番号は、そのとき1回限り（ワンタイム）のものなので、そのときに携帯電話を「持っている」人でないとログインできない、というしかけである。2要素認証（2段階認証、ワンタイムパスワード）には、主として

- 携帯電話へのSMSを使うもの
- 専用の確認コード表示用機械を使うもの（銀行などで多い）
- モバイルアプリを使うもの（[Google 認証システムの仕組み](/2016/03/26/GoogleAuthenticator/)参照）

がある。ここで、たとえばモバイルアプリで2要素認証を設定すると、そのモバイルアプリが使えなくなった時（モバイルの紛失など）にログインできなくなるので、携帯電話でも2要素認証ができるようにする、バックアップコードを印刷する、などといった対策が必要となる。携帯電話への SMS であれば、携帯電話を紛失しても同じ電話番号で新しい携帯電話を取得可能であれば、SMS を受け取ることは可能であろう。



